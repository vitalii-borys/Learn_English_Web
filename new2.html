<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Word Display</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            padding: 20px;
            background-color: rgb(39, 39, 36);
        }

        #wordDisplay {
            font-size: 24px;
            margin: 20px;
            padding: 10px;
            border: 2px solid #000;
            width: 300px;
            margin-left: auto;
            margin-right: auto;
            min-height: 40px;
            overflow-y: auto;
        }

        button {
            padding: 10px 20px;
            font-size: 16px;
            cursor: pointer;
        }

        button:hover {
            background-color: blue;
        }

        div {
            background-color: red;
        }
    </style>
</head>
<body>
    <script>
    const words = ["Apple", "Banana", "Cherry", "Date", "Elderberry", "Fig", "Grape"];
    let index = 0;
    let offset = 0;

    class DivManager {
        constructor() {
            this.divIds = [];
        }
    createDiv() {
        let offset = 0;
        let hasFadedOut = false;
        let newDiv = document.createElement('div');
        const uniqueId = words[index] + Date.now();
        newDiv.setAttribute('data-dynamic-div', uniqueId);
        newDiv.classList.add('myStyle');
        newDiv.textContent = `${words[index]}`;
        index = index + 1;
        document.body.appendChild(newDiv);
        this.divIds.push(uniqueId);
        newDiv.style.position = "absolute";
        newDiv.style.top = offset + 'px';
        newDiv.style.transform = `translateY(${offset+50}px)`;
        if (!hasFadedOut) {
                newDiv.style.opacity = '1';
            setTimeout(() => {
                    newDiv.style.transition = 'opacity 5s ease-in-out, transform 0.2s ease-in-out';
                    newDiv.style.opacity = '0';
                    hasFadedOut = true;
                }, 500); // 0.5s fade-in
            }
        setTimeout(() => {
            this.removeDiv(uniqueId);
        }, 5000);
        
        return uniqueId;
    }

    removeDiv(uniqueId) {
        const targetDiv = document.querySelector(`[data-dynamic-div="${uniqueId}"]`);
        if (targetDiv) {
            targetDiv.style.transition = 'opacity 0.5s';
            targetDiv.style.opacity = '0';
            setTimeout(() => {
                targetDiv.remove();
            }, 500);
            this.divIds = this.divIds.filter(id => id !== uniqueId);
        }
    }

    removeAllDivs() {
        // Create a copy of the array to avoid mutation during iteration
        var divIdsCopy = Array.from(this.divIds);
        for (var i = 0; i < divIdsCopy.length; i++) {
            const helloElement = document.querySelector('[data-dynamic-div="${divIdsCopy[i]}"]');
            //this.removeDiv(helloElement);
            let hasFaded = false;
            offset += 50;
            helloElement.style.transform = `translateY(${offset}px)`;
            if (!hasFaded) {
                helloElement.style.opacity = '1';
                setTimeout(() => {
                    helloElement.style.transition = 'opacity 5s ease-in-out, transform 0.2s ease-in-out';
                    helloElement.style.opacity = '0';
                    hasFaded = true;
                }, 500); // 0.5s fade-in
            }
        }
    }

    getDivCount() {
        return this.divIds.length;
    }
}
const divManager = new DivManager();
const addButton = document.createElement('button');
addButton.textContent = 'Add Div';
addButton.onclick = () => {
    divManager.createDiv();
    console.log('Current div count:', divManager.getDivCount());
};

const addButton2 = document.createElement('button');
addButton2.style.top = 100 + 'px';
addButton2.textContent = 'Add Div 2';
addButton2.onclick = () => {
    divManager.createDiv();
    console.log('Current div count:', divManager.getDivCount());
};

const removeButton = document.createElement('button');
removeButton.textContent = 'Remove All Divs';
removeButton.onclick = () => {
    divManager.removeAllDivs();
    console.log('Current div count:', divManager.getDivCount());
};

document.body.appendChild(addButton);
document.body.appendChild(addButton2);
document.body.appendChild(removeButton);
    </script>
</body>
</html>
